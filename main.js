!function(){"use strict";class e{constructor(e,t){let{items:r,renderer:s}=e;this._items=r,this._renderer=s,this._container=document.querySelector(t)}renderItems(){this.clear(),this._items.forEach((e=>{this._renderer(e)}))}clear(){this._container.innerHTML=""}appendItem(e){this._container.append(e)}prependItem(e){this._container.prepend(e)}}class t{constructor(e){let{popupSelector:t,popupOpenedClass:r,closeButtonSelector:s}=e;this._popupWindow=document.querySelector(t),this._closeButton=this._popupWindow.querySelector(s),this._popupOpenedClass=r}open(){this._popupWindow.classList.add(this._popupOpenedClass),document.addEventListener("keydown",this._handleEscClose)}close(){this._popupWindow.classList.remove(this._popupOpenedClass),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose=e=>{"Escape"===e.key&&this.close()};setEventListeners(){this._closeButton.addEventListener("click",(()=>{this.close()})),this._popupWindow.addEventListener("mousedown",(e=>{e.target===e.currentTarget&&this.close()}))}}class r extends t{constructor(e,t,r){super(e),this._submitHandler=r,this._popupForm=this._popupWindow.querySelector(t),this._formInputs=Array.from(this._popupForm.querySelectorAll("input")),this._submitBtn=this._popupForm.querySelector(".modal__submit-btn"),this._submitBtnOrigText=this._submitBtn.textContent}setEventListeners(){super.setEventListeners(),this._popupForm.addEventListener("submit",(e=>{this._submitHandler(e,this._getInputValues(),this)}))}_getInputValues(){const e={};return this._formInputs.forEach((t=>{e[t.name]=t.value})),e}setInputValues(e){this._formInputs.forEach((t=>{t.value=e[t.name]}))}close(){super.close(),this._popupForm.reset()}renderLoading(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Saving...";this._submitBtn.textContent=e?t:this._submitBtnOrigText}}class s{constructor(e,t,r,s,n,i){this._cardSelector=t,this._handleImageClick=r,this._confirmDelete=s,this._callApiDelete=n,this._callApiLike=i,this._cardElement=this._cardSelector.querySelector(".card").cloneNode(!0),this._cardElementCaption=this._cardElement.querySelector(".card__caption"),this._cardElementCaption.textContent=e.name,this._likeElement=this._cardElement.querySelector(".card__button-heart"),this._cardImageElement=this._cardElement.querySelector(".card__image"),this._cardImageElement.src=e.link,this._cardImageElement.alt=e.name,this._cardImageElement.id=e._id,e.isLiked&&this._likeElement.classList.add("card__button-heart_active")}_handleLikeCard=e=>{this._callApiLike(this._cardImageElement.id,!e.target.classList.contains("card__button-heart_active")).then((t=>(e.target.classList.toggle("card__button-heart_active"),t))).catch((e=>{alert(e)}))};_handleDeleteCard=()=>{this._confirmDelete(this)};deleteCard(){return this._callApiDelete(this._cardImageElement.id).then((e=>(this._removeEventListeners(),this._cardElement.remove(),e)))}_callHandleImageClick=()=>{this._handleImageClick(this)};_setEventListeners(){this._cardElement.querySelector(".card__button-heart").addEventListener("click",this._handleLikeCard),this._cardElement.querySelector(".card__button-delete").addEventListener("click",this._handleDeleteCard),this._cardImageElement.addEventListener("click",this._callHandleImageClick)}_removeEventListeners(){this._cardElement.querySelector(".card__button-heart").removeEventListener("click",this._handleLikeCard),this._cardElement.querySelector(".card__button-delete").removeEventListener("click",this._handleDeleteCard),this._cardImageElement.removeEventListener("click",this._callHandleImageClick)}getCardElement(){return this._setEventListeners(),this._cardElement}getCardName(){return this._cardElementCaption.textContent}getCardAltInfo(){return this._cardImageElement.alt}getCardLink(){return this._cardImageElement.src}}class n{constructor(e,t){let{inputSelector:r,submitButtonSelector:s,inputErrorClass:n,errorClass:i}=e;this._inputSelector=r,this._submitButtonSelector=s,this._inputErrorClass=n,this._errorClass=i,this._formElement=t,this._inputList=Array.from(this._formElement.querySelectorAll(this._inputSelector)),this._buttonElement=this._formElement.querySelector(this._submitButtonSelector)}_showInputError(e){const t=this._formElement.querySelector(`.${e.name}-error`);e.classList.add(this._inputErrorClass),t.classList.add(this._errorClass),t.textContent=e.validationMessage}_hideInputError(e){const t=this._formElement.querySelector(`.${e.name}-error`);e.classList.remove(this._inputErrorClass),t.classList.remove(this._errorClass),t.textContent=""}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}_hasInvalidInput(){return this._inputList.some((e=>!e.validity.valid))}_setSubmitButtonState(){this._hasInvalidInput()?this.disableSubmitButton():this._buttonElement.disabled=!1}_setEventListeners(){this._setSubmitButtonState(),this._inputList.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._setSubmitButtonState()}))}))}enableValidation(){this._formElement.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}disableSubmitButton(){this._buttonElement.disabled=!0}resetValidation(){const e=new Event("input");this._inputList.forEach((t=>{t.dispatchEvent(e)}))}}const i=[{name:"Yosemite Valley",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/yosemite.jpg"},{name:"Lake Louise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lake-louise.jpg"},{name:"Bald Mountains",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/bald-mountains.jpg"},{name:"Latemar",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/latemar.jpg"},{name:"Vanoise National Park",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/vanoise.jpg"},{name:"Lago di Braies",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lago.jpg"}],o={},a={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__submit-btn",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible"},l="modal_opened",c=".modal__form",d=document.querySelector(".modal__input_profile-name").name,u=document.querySelector(".modal__input_profile-description").name,p=document.querySelector(".modal__input_profile-url").name,h=document.querySelector(".modal__input_place-name").name,m=document.querySelector(".modal__input_place-pic-url").name,_=(document.forms["add-card-form"],document.querySelector(".profile__edit-button")),E=document.querySelector(".profile__image"),f=document.querySelector(".profile__add-card-button"),v=document.querySelector("#card").content,g=".modal__close-btn",S=document.querySelector(".header__reset-btn");function b(e){return new s(e,v,C,D,w,k).getCardElement()}function C(e){T.open({link:e.getCardLink(),altInfo:e.getCardAltInfo(),name:e.getCardName()})}document.querySelector(".header__get-btn");const L=new class{constructor(e){let{userNameSelector:t,userDescriptionSelector:r,userAvatarSelector:s}=e;this._userName=document.querySelector(t),this._userDescription=document.querySelector(r),this._userAvatar=document.querySelector(s)}getUserInfo(){const e={};return e.name=this._userName.textContent,e.description=this._userDescription.textContent,e}getUserAvatar(){return this._currentAvatar}setUserInfo(e){let{name:t,description:r}=e;this._userName.textContent=t,this._userDescription.textContent=r}setUserAvatar(e){this._userAvatar.src=e,this._currentAvatar=e}}({userNameSelector:".profile__title",userDescriptionSelector:".profile__description",userAvatarSelector:".profile__image"}),y=new r({popupSelector:"#edit-profile-modal",popupOpenedClass:l,closeButtonSelector:g},c,(function(e,t,r){r.renderLoading(!0),e.preventDefault();const s={name:`${t[d]}`,description:`${t[u]}`};q.setUserInfo(s).then((e=>{L.setUserInfo(s),y.close()})).catch((e=>{alert(e)})).finally((()=>{setTimeout((()=>{r.renderLoading(!1)}),1e3)}))}));y.setEventListeners(),_.addEventListener("click",(()=>{const e={},{name:t,description:r}=L.getUserInfo();e[d]=t,e[u]=r,y.setInputValues(e),o["edit-profile-form"].resetValidation(),o["edit-profile-form"].disableSubmitButton(),y.open()}));const I=new r({popupSelector:"#edit-profile-url-modal",popupOpenedClass:l,closeButtonSelector:g},c,(function(e,t,r){r.renderLoading(!0),e.preventDefault(),q.setUserAvatar(t[p]).then((e=>{console.log(e),L.setUserAvatar(t[p]),I.close()})).catch((e=>{alert(e)})).finally((()=>{setTimeout((()=>{r.renderLoading(!1)}),1e3)}))}));function w(e){return q.deleteCard(e)}function k(e,t){return q.setCardLike(e,t)}I.setEventListeners(),E.addEventListener("click",(()=>{const e={};e[p]=L.getUserAvatar(),I.setInputValues(e),o["edit-profile-url-form"].resetValidation(),o["edit-profile-url-form"].disableSubmitButton(),I.open()})),S.addEventListener("click",(function(){console.log("Cards delete"),q.deleteAllCards().then((()=>{q.writeCards(i)}))}));const q=new class{constructor(e){let{baseUrl:t,headers:r}=e;this._baseUrl=t,this._headers=r,console.log(this._baseUrl,this._headers)}_request(e,t,r){return fetch(e,t).then((e=>e.ok?e.json():Promise.reject(`${r} Error number: ${e.status}`)))}getInitialCards(){return this._request(`${this._baseUrl}/cards`,{headers:this._headers,method:"GET"},"Error loading cards from server.")}getUserInfo(){return this._request(`${this._baseUrl}/users/me`,{headers:this._headers,method:"GET"},"Error getting user info from server.")}setUserInfo(e){let{name:t,description:r}=e;return this._request(`${this._baseUrl}/users/me`,{headers:this._headers,method:"PATCH",body:JSON.stringify({name:t,about:r})},"Error setting user info from server.")}setUserAvatar(e){return this._request(`${this._baseUrl}/users/me/avatar`,{headers:this._headers,method:"PATCH",body:JSON.stringify({avatar:e})},"Error updataing user avatar. Possibly you typed in wrong URL.")}deleteCard(e){return this._request(`${this._baseUrl}/cards/${e}`,{headers:this._headers,method:"DELETE"},"Error deleteng card from server. Try again later.")}writeCard(e){return this._request(`${this._baseUrl}/cards`,{headers:this._headers,method:"POST",body:JSON.stringify(e)},"Error posting card to server. Possibly you typed in wrong URL.")}setCardLike(e,t){return this._request(`${this._baseUrl}/cards/${e}/likes`,{headers:this._headers,method:t?"PUT":"DELETE"},"Error writing like.")}deleteAllCards(){const e=[];return this.getInitialCards().then((t=>{t.forEach((t=>{e.push(this.deleteCard(t._id))}))})),Promise.all(e)}writeCards(e){const t=[];return e.forEach((e=>{t.push(this.writeCard(e))})),Promise.all(t).then((()=>`Successfully posted ${t.length} cards.`))}}({baseUrl:"https://around-api.en.tripleten-services.com/v1",headers:{authorization:"16b2631d-863b-4a4a-821d-14e3c93f8b71","Content-Type":"application/json"}});let A;Promise.all([q.getInitialCards(),q.getUserInfo()]).then((t=>{let[r,s]=t;A=new e({items:r,renderer:e=>{const t=b(e);A.appendItem(t)}},".elements__cards"),A.renderItems(),L.setUserInfo({name:s.name,description:s.about}),L.setUserAvatar(s.avatar)})).catch((e=>{allert(e)}));const U=new r({popupSelector:"#add-card-modal",popupOpenedClass:l,closeButtonSelector:g},c,(function(e,t,r){r.renderLoading(!0),e.preventDefault(),q.writeCard({name:t[h],link:t[m]}).then((e=>{console.log(e);const t=b(e);A.prependItem(t),U.close()})).catch((e=>{alert(e)})).finally((()=>{setTimeout((()=>{r.renderLoading(!1)}),1e3)}))}));U.setEventListeners(),f.addEventListener("click",(()=>{o["add-card-form"].disableSubmitButton(),U.open()}));const B=new class extends t{constructor(e,t,r){super(e),this._submitHandler=r,this._popupForm=this._popupWindow.querySelector(t)}open(e){this._cardToDelete=e,super.open()}setEventListeners(){super.setEventListeners(),this._popupForm.addEventListener("submit",(e=>{this._submitHandler(e,this._cardToDelete)}))}}({popupSelector:"#confirm-delete-modal",popupOpenedClass:l,closeButtonSelector:g},c,(function(e,t){e.preventDefault(),t.deleteCard().catch((e=>{alert(e)})).finally((()=>{B.close()}))}));function D(e){B.open(e)}B.setEventListeners();const T=new class extends t{constructor(e,t,r){super(e),this._picture=this._popupWindow.querySelector(t),this._caption=this._popupWindow.querySelector(r)}open(e){let{link:t,altInfo:r,name:s}=e;super.open(),this._picture.src=t,this._picture.alt=r,this._caption.textContent=s}}({popupSelector:"#show-pic-modal",popupOpenedClass:l,closeButtonSelector:g},".modal__picture",".modal__picture-caption");var x;T.setEventListeners(),x=a,Array.from(document.querySelectorAll(x.formSelector)).forEach((e=>{const t=new n(a,e),r=e.getAttribute("name");o[r]=t,t.enableValidation()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QSxHRHBOYSxrQkFDTywyQkMwTjNDLElBQTBCZ04sRUFKMUJ2RSxFQUFXM0gsb0JBSWVrTSxFQVVUMUYsRUFUSTdGLE1BQU1DLEtBQUt6QyxTQUFTMEMsaUJBQWlCcUwsRUFBTzdMLGVBQ3BEOUIsU0FBUzROLElBQ2QsTUFBTUMsRUFBbUIsSUFBSS9ILEVBQWNtQyxFQUFnQjJGLEdBQ3JERSxFQUFXRixFQUFZRyxhQUFhLFFBQzFDL0YsRUFBZThGLEdBQVlELEVBQzNCQSxFQUFpQnJHLGtCQUFrQixHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9BcGkuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoU3VibWl0QnV0dG9uLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xyXG4gICAgY29uc3RydWN0b3IoeyBpdGVtcywgcmVuZGVyZXIgfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcclxuICAgICAgICB0aGlzLl9pdGVtcyA9IGl0ZW1zO1xyXG4gICAgICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XHJcbiAgICAgICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7XHJcbiAgICB9XHJcblxyXG4gICAgcmVuZGVySXRlbXMoKSB7XHJcbiAgICAgICAgdGhpcy5jbGVhcigpO1xyXG4gICAgICAgIHRoaXMuX2l0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgICAgICAgICAgdGhpcy5fcmVuZGVyZXIoaXRlbSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgY2xlYXIoKSB7XHJcbiAgICAgICAgdGhpcy5fY29udGFpbmVyLmlubmVySFRNTCA9IFwiXCI7XHJcbiAgICB9XHJcblxyXG4gICAgYXBwZW5kSXRlbShlbGVtZW50KSB7XHJcbiAgICAgICAgdGhpcy5fY29udGFpbmVyLmFwcGVuZChlbGVtZW50KTtcclxuICAgIH1cclxuXHJcbiAgICBwcmVwZW5kSXRlbShlbGVtZW50KSB7XHJcbiAgICAgICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoZWxlbWVudCk7XHJcbiAgICB9XHJcbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XHJcbiAgICBjb25zdHJ1Y3Rvcigge3BvcHVwU2VsZWN0b3IsIHBvcHVwT3BlbmVkQ2xhc3MsIGNsb3NlQnV0dG9uU2VsZWN0b3J9ICkge1xyXG4gICAgICAgIHRoaXMuX3BvcHVwV2luZG93ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcclxuICAgICAgICB0aGlzLl9jbG9zZUJ1dHRvbiA9IHRoaXMuX3BvcHVwV2luZG93LnF1ZXJ5U2VsZWN0b3IoY2xvc2VCdXR0b25TZWxlY3Rvcik7XHJcbiAgICAgICAgdGhpcy5fcG9wdXBPcGVuZWRDbGFzcyA9IHBvcHVwT3BlbmVkQ2xhc3M7XHJcbiAgICB9XHJcblxyXG4gICAgb3BlbigpIHtcclxuICAgICAgICB0aGlzLl9wb3B1cFdpbmRvdy5jbGFzc0xpc3QuYWRkKHRoaXMuX3BvcHVwT3BlbmVkQ2xhc3MpO1xyXG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICAgIH1cclxuICAgIGNsb3NlKCkge1xyXG4gICAgICAgIHRoaXMuX3BvcHVwV2luZG93LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fcG9wdXBPcGVuZWRDbGFzcyk7XHJcbiAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gICAgfVxyXG5cclxuICAgIF9oYW5kbGVFc2NDbG9zZSA9IChldnQpID0+IHtcclxuICAgICAgICBpZiAoZXZ0LmtleSA9PT0gXCJFc2NhcGVcIikge1xyXG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgICAgIHRoaXMuX2Nsb3NlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7dGhpcy5jbG9zZSgpO30pO1xyXG4gICAgICAgIHRoaXMuX3BvcHVwV2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgKGV2dCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoZXZ0LnRhcmdldCA9PT0gZXZ0LmN1cnJlbnRUYXJnZXQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pOyAgICBcclxuICAgIH1cclxufSIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xyXG4gICAgY29uc3RydWN0b3IoZGF0YSwgZm9ybVNlbGVjdG9yLCBzdWJtaXRIYW5kbGVyKSB7XHJcbiAgICAgICAgc3VwZXIoZGF0YSk7XHJcbiAgICAgICAgdGhpcy5fc3VibWl0SGFuZGxlciA9IHN1Ym1pdEhhbmRsZXI7XHJcbiAgICAgICAgdGhpcy5fcG9wdXBGb3JtID0gdGhpcy5fcG9wdXBXaW5kb3cucXVlcnlTZWxlY3Rvcihmb3JtU2VsZWN0b3IpO1xyXG4gICAgICAgIHRoaXMuX2Zvcm1JbnB1dHMgPSBBcnJheS5mcm9tKHRoaXMuX3BvcHVwRm9ybS5xdWVyeVNlbGVjdG9yQWxsKFwiaW5wdXRcIikpO1xyXG4gICAgICAgIHRoaXMuX3N1Ym1pdEJ0biA9IHRoaXMuX3BvcHVwRm9ybS5xdWVyeVNlbGVjdG9yKCcubW9kYWxfX3N1Ym1pdC1idG4nKTtcclxuICAgICAgICB0aGlzLl9zdWJtaXRCdG5PcmlnVGV4dCA9IHRoaXMuX3N1Ym1pdEJ0bi50ZXh0Q29udGVudDtcclxuICAgIH1cclxuICAgIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICAgICAgdGhpcy5fcG9wdXBGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLl9zdWJtaXRIYW5kbGVyKGV2dCwgdGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSwgdGhpcyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XHJcbiAgICAgICAgY29uc3QgaW5wdXRWYWx1ZXMgPSB7fTtcclxuICAgICAgICB0aGlzLl9mb3JtSW5wdXRzLmZvckVhY2goKGZvcm1JbnB1dCkgPT4ge1xyXG4gICAgICAgICAgICBpbnB1dFZhbHVlc1tmb3JtSW5wdXQubmFtZV0gPSBmb3JtSW5wdXQudmFsdWU7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIGlucHV0VmFsdWVzO1xyXG4gICAgfVxyXG4gICAgc2V0SW5wdXRWYWx1ZXMoZGF0YSkge1xyXG4gICAgICAgIHRoaXMuX2Zvcm1JbnB1dHMuZm9yRWFjaCgoZm9ybUlucHV0KSA9PiB7XHJcbiAgICAgICAgICAgIGZvcm1JbnB1dC52YWx1ZSA9IGRhdGFbZm9ybUlucHV0Lm5hbWVdO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgY2xvc2UoKSB7XHJcbiAgICAgICAgc3VwZXIuY2xvc2UoKTtcclxuICAgICAgICB0aGlzLl9wb3B1cEZvcm0ucmVzZXQoKTtcclxuICAgIH1cclxuICAgIHJlbmRlckxvYWRpbmcoaXNMb2FkaW5nLCBsb2FkaW5nVGV4dCA9ICdTYXZpbmcuLi4nKSB7XHJcbiAgICAgICAgdGhpcy5fc3VibWl0QnRuLnRleHRDb250ZW50ID0gKGlzTG9hZGluZyA/IGxvYWRpbmdUZXh0IDogdGhpcy5fc3VibWl0QnRuT3JpZ1RleHQpO1xyXG4gICAgfVxyXG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZCB7XHJcbiAgICBjb25zdHJ1Y3RvciAoZGF0YSwgY2FyZFNlbGVjdG9yLCBoYW5kbGVJbWFnZUNsaWNrLCBjb25maXJtRGVsZXRlLCBjYWxsQXBpRGVsZXRlLCBjYWxsQXBpTGlrZSkge1xyXG4gICAgICAgIHRoaXMuX2NhcmRTZWxlY3RvciA9IGNhcmRTZWxlY3RvcjtcclxuICAgICAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrID0gaGFuZGxlSW1hZ2VDbGljaztcclxuICAgICAgICB0aGlzLl9jb25maXJtRGVsZXRlID0gY29uZmlybURlbGV0ZTtcclxuICAgICAgICB0aGlzLl9jYWxsQXBpRGVsZXRlID0gY2FsbEFwaURlbGV0ZTtcclxuICAgICAgICB0aGlzLl9jYWxsQXBpTGlrZSA9IGNhbGxBcGlMaWtlO1xyXG4gICAgICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gdGhpcy5fY2FyZFNlbGVjdG9yLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZFwiKS5jbG9uZU5vZGUodHJ1ZSk7XHJcbiAgICAgICAgdGhpcy5fY2FyZEVsZW1lbnRDYXB0aW9uID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19jYXB0aW9uXCIpO1xyXG4gICAgICAgIHRoaXMuX2NhcmRFbGVtZW50Q2FwdGlvbi50ZXh0Q29udGVudCA9IGRhdGEubmFtZTtcclxuICAgICAgICB0aGlzLl9saWtlRWxlbWVudCA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fYnV0dG9uLWhlYXJ0XCIpO1xyXG4gICAgICAgIHRoaXMuX2NhcmRJbWFnZUVsZW1lbnQgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpO1xyXG4gICAgICAgIHRoaXMuX2NhcmRJbWFnZUVsZW1lbnQuc3JjID0gZGF0YS5saW5rO1xyXG4gICAgICAgIHRoaXMuX2NhcmRJbWFnZUVsZW1lbnQuYWx0ID0gZGF0YS5uYW1lO1xyXG4gICAgICAgIHRoaXMuX2NhcmRJbWFnZUVsZW1lbnQuaWQgPSBkYXRhLl9pZDtcclxuICAgICAgICBpZiAoZGF0YS5pc0xpa2VkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2xpa2VFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJjYXJkX19idXR0b24taGVhcnRfYWN0aXZlXCIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBfaGFuZGxlTGlrZUNhcmQgPSAoZXZ0KSA9PiB7XHJcbiAgICAgICAgdGhpcy5fY2FsbEFwaUxpa2UodGhpcy5fY2FyZEltYWdlRWxlbWVudC5pZCwgIWV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwiY2FyZF9fYnV0dG9uLWhlYXJ0X2FjdGl2ZVwiKSkudGhlbihyZXMgPT4ge1xyXG4gICAgICAgICAgICBldnQudGFyZ2V0LmNsYXNzTGlzdC50b2dnbGUoXCJjYXJkX19idXR0b24taGVhcnRfYWN0aXZlXCIpO1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzO1xyXG4gICAgICAgIH0pLmNhdGNoKGVyciA9PiB7XHJcbiAgICAgICAgICAgIGFsZXJ0KGVycik7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgX2hhbmRsZURlbGV0ZUNhcmQgPSAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5fY29uZmlybURlbGV0ZSh0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICBkZWxldGVDYXJkKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9jYWxsQXBpRGVsZXRlKHRoaXMuX2NhcmRJbWFnZUVsZW1lbnQuaWQpLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLl9yZW1vdmVFdmVudExpc3RlbmVycygpO1xyXG4gICAgICAgICAgICB0aGlzLl9jYXJkRWxlbWVudC5yZW1vdmUoKTtcclxuICAgICAgICAgICAgcmV0dXJuIHJlcztcclxuICAgICAgICB9KSAgICAgICAgXHJcbiAgICB9XHJcblxyXG4gICAgX2NhbGxIYW5kbGVJbWFnZUNsaWNrID0gKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2sodGhpcyk7XHJcbiAgICB9XHJcblxyXG4gICAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgICAgIHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fYnV0dG9uLWhlYXJ0XCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLl9oYW5kbGVMaWtlQ2FyZCk7XHJcbiAgICAgICAgdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19idXR0b24tZGVsZXRlXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLl9oYW5kbGVEZWxldGVDYXJkKTtcclxuICAgICAgICB0aGlzLl9jYXJkSW1hZ2VFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLl9jYWxsSGFuZGxlSW1hZ2VDbGljayk7ICAgIFxyXG4gICAgfVxyXG5cclxuICAgIF9yZW1vdmVFdmVudExpc3RlbmVycygpIHtcclxuICAgICAgICB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2J1dHRvbi1oZWFydFwiKS5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5faGFuZGxlTGlrZUNhcmQpO1xyXG4gICAgICAgIHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fYnV0dG9uLWRlbGV0ZVwiKS5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5faGFuZGxlRGVsZXRlQ2FyZCk7XHJcbiAgICAgICAgdGhpcy5fY2FyZEltYWdlRWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5fY2FsbEhhbmRsZUltYWdlQ2xpY2spO1xyXG4gICAgfVxyXG5cclxuICAgIGdldENhcmRFbGVtZW50KCkgeyAgICAgICAgXHJcbiAgICAgICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5fY2FyZEVsZW1lbnQ7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0Q2FyZE5hbWUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NhcmRFbGVtZW50Q2FwdGlvbi50ZXh0Q29udGVudDtcclxuICAgIH1cclxuXHJcbiAgICBnZXRDYXJkQWx0SW5mbygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fY2FyZEltYWdlRWxlbWVudC5hbHQ7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0Q2FyZExpbmsoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NhcmRJbWFnZUVsZW1lbnQuc3JjO1xyXG4gICAgfVxyXG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XHJcbiAgICBjb25zdHJ1Y3RvciAoe2lucHV0U2VsZWN0b3IsIHN1Ym1pdEJ1dHRvblNlbGVjdG9yLCBpbnB1dEVycm9yQ2xhc3MsIGVycm9yQ2xhc3N9LCBlbGVtZW50VG9WYWxpZGF0ZSkge1xyXG4gICAgICAgIHRoaXMuX2lucHV0U2VsZWN0b3IgPSBpbnB1dFNlbGVjdG9yO1xyXG4gICAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yID0gc3VibWl0QnV0dG9uU2VsZWN0b3I7XHJcbiAgICAgICAgdGhpcy5faW5wdXRFcnJvckNsYXNzID0gaW5wdXRFcnJvckNsYXNzO1xyXG4gICAgICAgIHRoaXMuX2Vycm9yQ2xhc3MgPSBlcnJvckNsYXNzO1xyXG4gICAgICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gZWxlbWVudFRvVmFsaWRhdGU7XHJcbiAgICAgICAgdGhpcy5faW5wdXRMaXN0ID0gQXJyYXkuZnJvbSh0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpKTtcclxuICAgICAgICB0aGlzLl9idXR0b25FbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3Rvcik7XHJcbiAgICB9XHJcblxyXG4gICAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xyXG4gICAgICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYC4ke2lucHV0RWxlbWVudC5uYW1lfS1lcnJvcmApO1xyXG4gICAgICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcbiAgICAgICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgICAgICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlO1xyXG4gICAgfTtcclxuXHJcbiAgICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XHJcbiAgICAgICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgLiR7aW5wdXRFbGVtZW50Lm5hbWV9LWVycm9yYCk7XHJcbiAgICAgICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxuICAgICAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcclxuICAgICAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSAnJztcclxuICAgIH07XHJcblxyXG4gICAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpIHtcclxuICAgICAgICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xyXG4gICAgICAgICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBfaGFzSW52YWxpZElucHV0KCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9pbnB1dExpc3Quc29tZSgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICBfc2V0U3VibWl0QnV0dG9uU3RhdGUoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dCgpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGlzYWJsZVN1Ym1pdEJ1dHRvbigpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIF9zZXRFdmVudExpc3RlbmVycygpIHsgICAgICAgIFxyXG4gICAgICAgIHRoaXMuX3NldFN1Ym1pdEJ1dHRvblN0YXRlKCk7XHJcbiAgICAgICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICAgICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fc2V0U3VibWl0QnV0dG9uU3RhdGUoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIGVuYWJsZVZhbGlkYXRpb24oKSB7XHJcbiAgICAgICAgdGhpcy5fZm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XHJcbiAgICAgICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB9O1xyXG5cclxuICAgIGRpc2FibGVTdWJtaXRCdXR0b24oKSB7XHJcbiAgICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgcmVzZXRWYWxpZGF0aW9uKCkge1xyXG4gICAgICAgIGNvbnN0IHNpbXVsYXRlSW5wdXRFdmVudCA9IG5ldyBFdmVudChcImlucHV0XCIpO1xyXG4gICAgICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChtb2RhbElucHV0KSA9PiB7bW9kYWxJbnB1dC5kaXNwYXRjaEV2ZW50KHNpbXVsYXRlSW5wdXRFdmVudCk7fSk7XHJcbiAgICB9O1xyXG59IiwiXHJcbmV4cG9ydCBjb25zdCBjYXJkc0FycmF5ID0gW1xyXG4gICAge1xyXG4gICAgICAgIG5hbWU6ICAgXCJZb3NlbWl0ZSBWYWxsZXlcIixcclxuICAgICAgICBsaW5rOiAgIFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC95b3NlbWl0ZS5qcGdcIixcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgICAgbmFtZTogICBcIkxha2UgTG91aXNlXCIsXHJcbiAgICAgICAgbGluazogICBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGFrZS1sb3Vpc2UuanBnXCIsXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICAgIG5hbWU6ICAgXCJCYWxkIE1vdW50YWluc1wiLFxyXG4gICAgICAgIGxpbms6ICAgXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2JhbGQtbW91bnRhaW5zLmpwZ1wiLFxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgICBuYW1lOiAgIFwiTGF0ZW1hclwiLFxyXG4gICAgICAgIGxpbms6ICAgXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xhdGVtYXIuanBnXCIsXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICAgIG5hbWU6ICAgXCJWYW5vaXNlIE5hdGlvbmFsIFBhcmtcIixcclxuICAgICAgICBsaW5rOiAgIFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC92YW5vaXNlLmpwZ1wiLFxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgICBuYW1lOiAgIFwiTGFnbyBkaSBCcmFpZXNcIixcclxuICAgICAgICBsaW5rOiAgIFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYWdvLmpwZ1wiLFxyXG4gICAgfVxyXG5dO1xyXG5cclxuZXhwb3J0IGNvbnN0IGVkaXRQcm9maWxlUG9wdXBTZWxlY3RvciA9IFwiI2VkaXQtcHJvZmlsZS1tb2RhbFwiO1xyXG5leHBvcnQgY29uc3QgZWRpdFByb2ZpbGVBdmF0YXJQb3B1cFNlbGVjdG9yID0gXCIjZWRpdC1wcm9maWxlLXVybC1tb2RhbFwiO1xyXG5leHBvcnQgY29uc3QgY29uZmlybURlbGV0ZVBvcHVwU2VsZWN0b3IgPSBcIiNjb25maXJtLWRlbGV0ZS1tb2RhbFwiO1xyXG5leHBvcnQgY29uc3QgYWRkQ2FyZFBvcHVwU2VsZWN0b3IgPSBcIiNhZGQtY2FyZC1tb2RhbFwiO1xyXG5leHBvcnQgY29uc3QgaW1hZ2VQb3B1cFNlbGVjdG9yID0gXCIjc2hvdy1waWMtbW9kYWxcIjtcclxuZXhwb3J0IGNvbnN0IG1vZGFsUGljdHVyZVNlbGVjdG9yID0gXCIubW9kYWxfX3BpY3R1cmVcIjtcclxuZXhwb3J0IGNvbnN0IG1vZGFsUGljdHVyZUNhcHRpb25TZWxlY3RvciA9IFwiLm1vZGFsX19waWN0dXJlLWNhcHRpb25cIjtcclxuXHJcbmV4cG9ydCBjb25zdCBmb3JtVmFsaWRhdG9ycyA9IHt9O1xyXG5cclxuZXhwb3J0IGNvbnN0IGlucHV0Rm9ybXNJbmZvID0ge1xyXG4gICAgZm9ybVNlbGVjdG9yOiBcIi5tb2RhbF9fZm9ybVwiLFxyXG4gICAgaW5wdXRTZWxlY3RvcjogXCIubW9kYWxfX2lucHV0XCIsXHJcbiAgICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIubW9kYWxfX3N1Ym1pdC1idG5cIixcclxuICAgIGlucHV0RXJyb3JDbGFzczogXCJtb2RhbF9faW5wdXRfdHlwZV9lcnJvclwiLFxyXG4gICAgZXJyb3JDbGFzczogXCJtb2RhbF9fZXJyb3JfdmlzaWJsZVwiICAgICAgICAgICAgICAgICAgICAgIFxyXG59XHJcblxyXG5leHBvcnQgY29uc3QgcG9wdXBPcGVuZWRDbGFzcyA9IFwibW9kYWxfb3BlbmVkXCI7XHJcbmV4cG9ydCBjb25zdCBmb3JtU2VsZWN0b3IgPSBcIi5tb2RhbF9fZm9ybVwiO1xyXG5cclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVUaXRsZVNlbGVjdG9yID0gXCIucHJvZmlsZV9fdGl0bGVcIjtcclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVEZXNjcmlwdGlvblNlbGVjdG9yID0gXCIucHJvZmlsZV9fZGVzY3JpcHRpb25cIjtcclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVBdmF0YXJTZWxlY3RvciA9IFwiLnByb2ZpbGVfX2ltYWdlXCI7XHJcblxyXG5leHBvcnQgY29uc3QgbW9kYWxUaXRsZUlucHV0TmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2lucHV0X3Byb2ZpbGUtbmFtZVwiKS5uYW1lO1xyXG5leHBvcnQgY29uc3QgbW9kYWxEZXNjcmlwdGlvbklucHV0TmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2lucHV0X3Byb2ZpbGUtZGVzY3JpcHRpb25cIikubmFtZTtcclxuZXhwb3J0IGNvbnN0IG1vZGFsUHJvZmlsZVVybElucHV0TmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2lucHV0X3Byb2ZpbGUtdXJsXCIpLm5hbWU7XHJcbmV4cG9ydCBjb25zdCBtb2RhbFBsYWNlSW5wdXROYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9faW5wdXRfcGxhY2UtbmFtZVwiKS5uYW1lO1xyXG5leHBvcnQgY29uc3QgbW9kYWxQbGFjZVBpY1VybElucHV0TmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2lucHV0X3BsYWNlLXBpYy11cmxcIikubmFtZTtcclxuXHJcbmV4cG9ydCBjb25zdCBhZGRDYXJkRm9ybSA9IGRvY3VtZW50LmZvcm1zWydhZGQtY2FyZC1mb3JtJ107XHJcbmV4cG9ydCBjb25zdCBlZGl0UHJvZmlsZUJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fZWRpdC1idXR0b25cIik7XHJcbmV4cG9ydCBjb25zdCBlZGl0UHJvZmlsZUF2YXRhckJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9faW1hZ2VcIik7XHJcbmV4cG9ydCBjb25zdCBhZGRDYXJkQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hZGQtY2FyZC1idXR0b25cIik7XHJcblxyXG5leHBvcnQgY29uc3QgY2FyZFRlbXBsYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjYXJkXCIpLmNvbnRlbnQ7XHJcbmV4cG9ydCBjb25zdCBjYXJkc1NlY3Rpb25TZWxlY3RvciA9IFwiLmVsZW1lbnRzX19jYXJkc1wiO1xyXG5leHBvcnQgY29uc3QgY2xvc2VCdXR0b25TZWxlY3RvciA9IFwiLm1vZGFsX19jbG9zZS1idG5cIjtcclxuXHJcbmV4cG9ydCBjb25zdCByZXNldENhcmRzQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5oZWFkZXJfX3Jlc2V0LWJ0blwiKTtcclxuZXhwb3J0IGNvbnN0IGdldENhcmRzQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5oZWFkZXJfX2dldC1idG5cIik7XHJcblxyXG5jb25zdCB0b2tlbiA9IHtcclxuICAgIFwidXNlclwiOiB7XHJcbiAgICAgICAgXCJuYW1lXCI6IFwiSmFjcXVlcyBDb3VzdGVhdVwiLFxyXG4gICAgICAgIFwiYWJvdXRcIjogXCJTYWlsb3IsIHJlc2VhcmNoZXJcIixcclxuICAgICAgICBcImF2YXRhclwiOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vZnJvbnRlbmQtZGV2ZWxvcGVyL2NvbW1vbi9hdmF0YXIuanBnXCIsXHJcbiAgICAgICAgXCJfaWRcIjogXCI3ZGY2MWI4NzVhNTZhNzgwNWRmMjBhNmJcIlxyXG4gICAgfSxcclxuICAgIFwidG9rZW5cIjpcIjE2YjI2MzFkLTg2M2ItNGE0YS04MjFkLTE0ZTNjOTNmOGI3MVwiXHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgYmFzaWNSZXF1ZXN0SW5mbyA9IHtcclxuICAgIGJhc2VVcmw6IFwiaHR0cHM6Ly9hcm91bmQtYXBpLmVuLnRyaXBsZXRlbi1zZXJ2aWNlcy5jb20vdjFcIixcclxuICAgIGhlYWRlcnM6IHtcclxuICAgICAgYXV0aG9yaXphdGlvbjogXCIxNmIyNjMxZC04NjNiLTRhNGEtODIxZC0xNGUzYzkzZjhiNzFcIixcclxuICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcclxuICAgIH1cclxufTsiLCJpbXBvcnQgXCIuLi9wYWdlcy9pbmRleC5jc3NcIjtcclxuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoU3VibWl0QnV0dG9uIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aFN1Ym1pdEJ1dHRvbi5qc1wiO1xyXG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcclxuaW1wb3J0IENhcmQgZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xyXG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XHJcbmltcG9ydCBBcGkgZnJvbSBcIi4uL2NvbXBvbmVudHMvQXBpLmpzXCI7XHJcblxyXG5pbXBvcnQge1xyXG4gICAgY2FyZFRlbXBsYXRlLFxyXG4gICAgaW5wdXRGb3Jtc0luZm8sXHJcbiAgICBjYXJkc0FycmF5LFxyXG4gICAgY2FyZHNTZWN0aW9uU2VsZWN0b3IsXHJcbiAgICBlZGl0UHJvZmlsZUJ0bixcclxuICAgIGVkaXRQcm9maWxlQXZhdGFyQnRuLFxyXG4gICAgZWRpdFByb2ZpbGVQb3B1cFNlbGVjdG9yLFxyXG4gICAgZWRpdFByb2ZpbGVBdmF0YXJQb3B1cFNlbGVjdG9yLFxyXG4gICAgY29uZmlybURlbGV0ZVBvcHVwU2VsZWN0b3IsXHJcbiAgICBhZGRDYXJkQnRuLFxyXG4gICAgYWRkQ2FyZFBvcHVwU2VsZWN0b3IsXHJcbiAgICBwb3B1cE9wZW5lZENsYXNzLFxyXG4gICAgY2xvc2VCdXR0b25TZWxlY3RvcixcclxuICAgIGZvcm1TZWxlY3RvcixcclxuICAgIHByb2ZpbGVUaXRsZVNlbGVjdG9yLFxyXG4gICAgcHJvZmlsZURlc2NyaXB0aW9uU2VsZWN0b3IsXHJcbiAgICBwcm9maWxlQXZhdGFyU2VsZWN0b3IsXHJcbiAgICBtb2RhbFRpdGxlSW5wdXROYW1lLFxyXG4gICAgbW9kYWxEZXNjcmlwdGlvbklucHV0TmFtZSxcclxuICAgIG1vZGFsUHJvZmlsZVVybElucHV0TmFtZSxcclxuICAgIG1vZGFsUGxhY2VJbnB1dE5hbWUsXHJcbiAgICBtb2RhbFBsYWNlUGljVXJsSW5wdXROYW1lLFxyXG4gICAgaW1hZ2VQb3B1cFNlbGVjdG9yLFxyXG4gICAgbW9kYWxQaWN0dXJlU2VsZWN0b3IsXHJcbiAgICBtb2RhbFBpY3R1cmVDYXB0aW9uU2VsZWN0b3IsXHJcbiAgICBmb3JtVmFsaWRhdG9ycyxcclxuICAgIGJhc2ljUmVxdWVzdEluZm8sXHJcbiAgICByZXNldENhcmRzQnRuXHJcbn0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiXHJcblxyXG5cclxuLy8gLS0tLS0tLS0tLS0tLSBJbml0IENhcmRzIFBhcnQgLS0tLS0tLS0tLS0tLS0tXHJcblxyXG5mdW5jdGlvbiBjcmVhdGVDYXJkKGNhcmRJbmZvKSB7XHJcbiAgICBjb25zdCBuZXdDYXJkID0gbmV3IENhcmQoY2FyZEluZm8sIGNhcmRUZW1wbGF0ZSwgaGFuZGxlSW1hZ2VDbGljaywgb3BlbkNvbmZpcm1EZWxldGVQb3B1cCwgYXBpRGVsZXRlQ2FyZCwgYXBpTGlrZUNhcmQpO1xyXG4gICAgcmV0dXJuIG5ld0NhcmQuZ2V0Q2FyZEVsZW1lbnQoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlSW1hZ2VDbGljayhjYXJkKSB7XHJcbiAgICBpbWFnZVBvcHVwLm9wZW4oe1xyXG4gICAgICAgIGxpbms6IGNhcmQuZ2V0Q2FyZExpbmsoKSxcclxuICAgICAgICBhbHRJbmZvOiBjYXJkLmdldENhcmRBbHRJbmZvKCksXHJcbiAgICAgICAgbmFtZTogY2FyZC5nZXRDYXJkTmFtZSgpXHJcbiAgICB9KTtcclxufVxyXG5cclxuLy8gLS0tLS0tLS0tLS0tLSBVc2VyIFBhcnQgLS0tLS0tLS0tLS0tLS0tXHJcblxyXG5jb25zdCB1c2VyID0gbmV3IFVzZXJJbmZvKHtcclxuICAgIHVzZXJOYW1lU2VsZWN0b3I6IHByb2ZpbGVUaXRsZVNlbGVjdG9yLCBcclxuICAgIHVzZXJEZXNjcmlwdGlvblNlbGVjdG9yOiBwcm9maWxlRGVzY3JpcHRpb25TZWxlY3RvcixcclxuICAgIHVzZXJBdmF0YXJTZWxlY3RvcjogcHJvZmlsZUF2YXRhclNlbGVjdG9yXHJcbn0pO1xyXG5cclxuLy8gLS0tLS0tLS0tLS0tLSBFZGl0IFByb2ZpbGUgSW5mbyBQYXJ0IC0tLS0tLS0tLS0tLS0tLVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlU3VibWl0Rm9ybVByb2ZpbGUoZXZ0LCBpbnB1dFZhbHVlcywgcG9wdXApIHtcclxuICAgIHBvcHVwLnJlbmRlckxvYWRpbmcodHJ1ZSk7XHJcbiAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgICBjb25zdCBuZXdVc2VySW5mbyA9IHtcclxuICAgICAgICBuYW1lOiBgJHtpbnB1dFZhbHVlc1ttb2RhbFRpdGxlSW5wdXROYW1lXX1gLFxyXG4gICAgICAgIGRlc2NyaXB0aW9uOiBgJHtpbnB1dFZhbHVlc1ttb2RhbERlc2NyaXB0aW9uSW5wdXROYW1lXX1gXHJcbiAgICB9XHJcbiAgICBhcGkuc2V0VXNlckluZm8obmV3VXNlckluZm8pLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgIHVzZXIuc2V0VXNlckluZm8obmV3VXNlckluZm8pO1xyXG4gICAgICAgIGVkaXRQcm9maWxlUG9wdXAuY2xvc2UoKTtcclxuICAgIH0pLmNhdGNoKGVyciA9PiB7XHJcbiAgICAgICAgYWxlcnQoZXJyKTtcclxuICAgIH0pLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICBwb3B1cC5yZW5kZXJMb2FkaW5nKGZhbHNlKTtcclxuICAgICAgICB9LCAxMDAwKTtcclxuICAgIH0pXHJcbn1cclxuXHJcbmNvbnN0IGVkaXRQcm9maWxlUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybSh7XHJcbiAgICBwb3B1cFNlbGVjdG9yOiBlZGl0UHJvZmlsZVBvcHVwU2VsZWN0b3IsIFxyXG4gICAgcG9wdXBPcGVuZWRDbGFzcywgXHJcbiAgICBjbG9zZUJ1dHRvblNlbGVjdG9yXHJcbn0sIGZvcm1TZWxlY3RvciwgaGFuZGxlU3VibWl0Rm9ybVByb2ZpbGUpO1xyXG5cclxuZWRpdFByb2ZpbGVQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuZWRpdFByb2ZpbGVCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgIGNvbnN0IGRhdGEgPSB7fTtcclxuICAgIGNvbnN0IHsgbmFtZSwgZGVzY3JpcHRpb24gfSA9IHVzZXIuZ2V0VXNlckluZm8oKTtcclxuICAgIGRhdGFbbW9kYWxUaXRsZUlucHV0TmFtZV0gPSBuYW1lO1xyXG4gICAgZGF0YVttb2RhbERlc2NyaXB0aW9uSW5wdXROYW1lXSA9IGRlc2NyaXB0aW9uO1xyXG4gICAgZWRpdFByb2ZpbGVQb3B1cC5zZXRJbnB1dFZhbHVlcyhkYXRhKTtcclxuICAgIGZvcm1WYWxpZGF0b3JzWydlZGl0LXByb2ZpbGUtZm9ybSddLnJlc2V0VmFsaWRhdGlvbigpO1xyXG4gICAgZm9ybVZhbGlkYXRvcnNbJ2VkaXQtcHJvZmlsZS1mb3JtJ10uZGlzYWJsZVN1Ym1pdEJ1dHRvbigpO1xyXG4gICAgZWRpdFByb2ZpbGVQb3B1cC5vcGVuKCk7XHJcbn0pO1xyXG5cclxuLy8gLS0tLS0tLS0tLS0tLSBFZGl0IFByb2ZpbGUgQXZhdGFyIFBhcnQgLS0tLS0tLS0tLS0tLS0tXHJcblxyXG5mdW5jdGlvbiBoYW5kbGVTdWJtaXRGb3JtUHJvZmlsZUF2YXRhcihldnQsIGlucHV0VmFsdWVzLCBwb3B1cCkge1xyXG4gICAgcG9wdXAucmVuZGVyTG9hZGluZyh0cnVlKTtcclxuICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpOyAgICBcclxuICAgIGFwaS5zZXRVc2VyQXZhdGFyKGlucHV0VmFsdWVzW21vZGFsUHJvZmlsZVVybElucHV0TmFtZV0pLnRoZW4ocmVzID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZyhyZXMpO1xyXG4gICAgICAgIHVzZXIuc2V0VXNlckF2YXRhcihpbnB1dFZhbHVlc1ttb2RhbFByb2ZpbGVVcmxJbnB1dE5hbWVdKTtcclxuICAgICAgICBlZGl0UHJvZmlsZUF2YXRhclBvcHVwLmNsb3NlKCk7XHJcbiAgICB9KS5jYXRjaCAoZXJyID0+IHtcclxuICAgICAgICBhbGVydChlcnIpO1xyXG4gICAgfSkuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgIHBvcHVwLnJlbmRlckxvYWRpbmcoZmFsc2UpO1xyXG4gICAgICAgIH0sIDEwMDApO1xyXG4gICAgfSlcclxufVxyXG5cclxuY29uc3QgZWRpdFByb2ZpbGVBdmF0YXJQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKHtcclxuICAgIHBvcHVwU2VsZWN0b3I6IGVkaXRQcm9maWxlQXZhdGFyUG9wdXBTZWxlY3RvciwgXHJcbiAgICBwb3B1cE9wZW5lZENsYXNzLCBcclxuICAgIGNsb3NlQnV0dG9uU2VsZWN0b3JcclxufSwgZm9ybVNlbGVjdG9yLCBoYW5kbGVTdWJtaXRGb3JtUHJvZmlsZUF2YXRhcik7XHJcblxyXG5lZGl0UHJvZmlsZUF2YXRhclBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG5lZGl0UHJvZmlsZUF2YXRhckJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgY29uc3QgZGF0YSA9IHt9O1xyXG4gICAgZGF0YVttb2RhbFByb2ZpbGVVcmxJbnB1dE5hbWVdID0gdXNlci5nZXRVc2VyQXZhdGFyKCk7XHJcbiAgICBlZGl0UHJvZmlsZUF2YXRhclBvcHVwLnNldElucHV0VmFsdWVzKGRhdGEpO1xyXG5cclxuICAgIGZvcm1WYWxpZGF0b3JzWydlZGl0LXByb2ZpbGUtdXJsLWZvcm0nXS5yZXNldFZhbGlkYXRpb24oKTtcclxuICAgIGZvcm1WYWxpZGF0b3JzWydlZGl0LXByb2ZpbGUtdXJsLWZvcm0nXS5kaXNhYmxlU3VibWl0QnV0dG9uKCk7XHJcbiAgICBlZGl0UHJvZmlsZUF2YXRhclBvcHVwLm9wZW4oKTtcclxufSk7XHJcblxyXG4vLyAtLS0tLS0tLS0tLS0tIEFwaSBQYXJ0IC0tLS0tLS0tLS0tLS0tLVxyXG5cclxuZnVuY3Rpb24gcmVzZXRDYXJkcygpIHtcclxuICAgIGNvbnNvbGUubG9nKFwiQ2FyZHMgZGVsZXRlXCIpO1xyXG4gICAgYXBpLmRlbGV0ZUFsbENhcmRzKCkudGhlbigoKSA9PiB7XHJcbiAgICAgICAgYXBpLndyaXRlQ2FyZHMoY2FyZHNBcnJheSk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gYXBpRGVsZXRlQ2FyZChpZCkge1xyXG4gICAgcmV0dXJuIGFwaS5kZWxldGVDYXJkKGlkKTtcclxufVxyXG5cclxuZnVuY3Rpb24gYXBpTGlrZUNhcmQoaWQsIGlzTGlrZWQpIHtcclxuICAgIHJldHVybiBhcGkuc2V0Q2FyZExpa2UoaWQsIGlzTGlrZWQpO1xyXG59XHJcblxyXG5yZXNldENhcmRzQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCByZXNldENhcmRzKTtcclxuXHJcbmNvbnN0IGFwaSA9IG5ldyBBcGkoYmFzaWNSZXF1ZXN0SW5mbyk7XHJcblxyXG5sZXQgY2FyZHNTZWN0aW9uO1xyXG5cclxuUHJvbWlzZS5hbGwoW2FwaS5nZXRJbml0aWFsQ2FyZHMoKSwgYXBpLmdldFVzZXJJbmZvKCldKS50aGVuKChbY2FyZHMsIHVzZXJEYXRhXSkgPT4ge1xyXG5cclxuICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0gRmlsbCBjYXJkcyBzZWN0aW9uIHdpdGggcmVjaWV2ZWQgY2FyZHMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgICBjYXJkc1NlY3Rpb24gPSBuZXcgU2VjdGlvbih7IGl0ZW1zOiBjYXJkcywgcmVuZGVyZXI6IChjYXJkSW5mbykgPT4ge1xyXG4gICAgICAgIGNvbnN0IG5ld0NhcmRFbGVtZW50ID0gY3JlYXRlQ2FyZChjYXJkSW5mbyk7XHJcbiAgICAgICAgY2FyZHNTZWN0aW9uLmFwcGVuZEl0ZW0obmV3Q2FyZEVsZW1lbnQpOyAgICBcclxuICAgIH19LCBjYXJkc1NlY3Rpb25TZWxlY3Rvcik7XHJcbiAgICBjYXJkc1NlY3Rpb24ucmVuZGVySXRlbXMoKTtcclxuXHJcbiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tIEZpbGwgdXNlciBpbmZvIHdpdGggcmVjaWV2ZWQgZGF0YSAtLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgIHVzZXIuc2V0VXNlckluZm8oe25hbWU6IHVzZXJEYXRhLm5hbWUsIGRlc2NyaXB0aW9uOiB1c2VyRGF0YS5hYm91dH0pO1xyXG4gICAgdXNlci5zZXRVc2VyQXZhdGFyKHVzZXJEYXRhLmF2YXRhcik7XHJcbn0pLmNhdGNoKGVyciA9PiB7XHJcbiAgICBhbGxlcnQoZXJyKTtcclxufSlcclxuXHJcblxyXG5cclxuLy8gLS0tLS0tLS0tLS0tLSBBZGQgQ2FyZCBQYXJ0IC0tLS0tLS0tLS0tLS0tLVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlU3VibWl0Rm9ybUFkZENhcmQoZXZ0LCBpbnB1dFZhbHVlcywgcG9wdXApIHtcclxuICAgIHBvcHVwLnJlbmRlckxvYWRpbmcodHJ1ZSk7XHJcbiAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgIGFwaS53cml0ZUNhcmQoe1xyXG4gICAgICAgIG5hbWU6IGlucHV0VmFsdWVzW21vZGFsUGxhY2VJbnB1dE5hbWVdLFxyXG4gICAgICAgIGxpbms6IGlucHV0VmFsdWVzW21vZGFsUGxhY2VQaWNVcmxJbnB1dE5hbWVdXHJcbiAgICB9KS50aGVuKHJlcyA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2cocmVzKTtcclxuICAgICAgICBjb25zdCBhZGRlZENhcmQgPSBjcmVhdGVDYXJkKHJlcyk7XHJcbiAgICAgICAgY2FyZHNTZWN0aW9uLnByZXBlbmRJdGVtKGFkZGVkQ2FyZCk7XHJcbiAgICAgICAgYWRkQ2FyZFBvcHVwLmNsb3NlKCk7XHJcbiAgICB9KS5jYXRjaChlcnIgPT4ge1xyXG4gICAgICAgIGFsZXJ0KGVycik7XHJcbiAgICB9KS5maW5hbGx5KCgpID0+IHtcclxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgcG9wdXAucmVuZGVyTG9hZGluZyhmYWxzZSk7XHJcbiAgICAgICAgfSwgMTAwMCk7XHJcbiAgICAgICAgXHJcbiAgICB9KVxyXG59XHJcblxyXG5jb25zdCBhZGRDYXJkUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybSh7XHJcbiAgICBwb3B1cFNlbGVjdG9yOiBhZGRDYXJkUG9wdXBTZWxlY3RvciwgXHJcbiAgICBwb3B1cE9wZW5lZENsYXNzLCBcclxuICAgIGNsb3NlQnV0dG9uU2VsZWN0b3JcclxufSwgZm9ybVNlbGVjdG9yLCBoYW5kbGVTdWJtaXRGb3JtQWRkQ2FyZCk7XHJcbmFkZENhcmRQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuYWRkQ2FyZEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgZm9ybVZhbGlkYXRvcnNbJ2FkZC1jYXJkLWZvcm0nXS5kaXNhYmxlU3VibWl0QnV0dG9uKCk7XHJcbiAgICBhZGRDYXJkUG9wdXAub3BlbigpO1xyXG59KTtcclxuXHJcbi8vIC0tLS0tLS0tLS0tLS0gRGVsZXRlIENhcmQgUGFydCAtLS0tLS0tLS0tLS0tLS1cclxuZnVuY3Rpb24gaGFuZGxlQ29uZmlybURlbGV0ZShldnQsIGNhcmRUb0RlbGV0ZSkge1xyXG4gICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICBjYXJkVG9EZWxldGUuZGVsZXRlQ2FyZCgpLmNhdGNoKGVyciA9PiB7XHJcbiAgICAgICAgYWxlcnQoZXJyKTtcclxuICAgIH0pLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICAgIGNvbmZpcm1EZWxldGVQb3B1cC5jbG9zZSgpOyAgICBcclxuICAgIH0pICAgIFxyXG59XHJcblxyXG5jb25zdCBjb25maXJtRGVsZXRlUG9wdXAgPSBuZXcgUG9wdXBXaXRoU3VibWl0QnV0dG9uKHtcclxuICAgIHBvcHVwU2VsZWN0b3I6IGNvbmZpcm1EZWxldGVQb3B1cFNlbGVjdG9yLFxyXG4gICAgcG9wdXBPcGVuZWRDbGFzcywgXHJcbiAgICBjbG9zZUJ1dHRvblNlbGVjdG9yXHJcbn0sIGZvcm1TZWxlY3RvciwgaGFuZGxlQ29uZmlybURlbGV0ZSk7XHJcblxyXG5jb25maXJtRGVsZXRlUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbmZ1bmN0aW9uIG9wZW5Db25maXJtRGVsZXRlUG9wdXAoY2FyZCkge1xyXG4gICAgY29uZmlybURlbGV0ZVBvcHVwLm9wZW4oY2FyZCk7XHJcbn1cclxuXHJcbi8vIC0tLS0tLS0tLS0tLS0gSW1hZ2UgUG9wdXAgUGFydCAtLS0tLS0tLS0tLS0tLS1cclxuXHJcbmNvbnN0IGltYWdlUG9wdXAgPSBuZXcgUG9wdXBXaXRoSW1hZ2Uoe1xyXG4gICAgcG9wdXBTZWxlY3RvcjogaW1hZ2VQb3B1cFNlbGVjdG9yLCBcclxuICAgIHBvcHVwT3BlbmVkQ2xhc3MsIFxyXG4gICAgY2xvc2VCdXR0b25TZWxlY3RvclxyXG59LCBtb2RhbFBpY3R1cmVTZWxlY3RvciwgbW9kYWxQaWN0dXJlQ2FwdGlvblNlbGVjdG9yKTtcclxuXHJcbmltYWdlUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbi8vIC0tLS0tLS0tLS0tLS0gVmFsaWRhdGlvbiBQYXJ0IC0tLS0tLS0tLS0tLS0tLVxyXG5cclxuZnVuY3Rpb24gZW5hYmxlVmFsaWRhdGlvbihjb25maWcpIHtcclxuICAgIGNvbnN0IGZvcm1MaXN0ID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGNvbmZpZy5mb3JtU2VsZWN0b3IpKTtcclxuICAgIGZvcm1MaXN0LmZvckVhY2goKGZvcm1FbGVtZW50KSA9PiB7XHJcbiAgICAgICAgY29uc3QgbmV3Rm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKGlucHV0Rm9ybXNJbmZvLCBmb3JtRWxlbWVudCk7XHJcbiAgICAgICAgY29uc3QgZm9ybU5hbWUgPSBmb3JtRWxlbWVudC5nZXRBdHRyaWJ1dGUoJ25hbWUnKTtcclxuICAgICAgICBmb3JtVmFsaWRhdG9yc1tmb3JtTmFtZV0gPSBuZXdGb3JtVmFsaWRhdG9yO1xyXG4gICAgICAgIG5ld0Zvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbmVuYWJsZVZhbGlkYXRpb24oaW5wdXRGb3Jtc0luZm8pOyIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcclxuICAgIGNvbnN0cnVjdG9yKCB7dXNlck5hbWVTZWxlY3RvciwgdXNlckRlc2NyaXB0aW9uU2VsZWN0b3IsIHVzZXJBdmF0YXJTZWxlY3Rvcn0gKSB7XHJcbiAgICAgICAgdGhpcy5fdXNlck5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHVzZXJOYW1lU2VsZWN0b3IpO1xyXG4gICAgICAgIHRoaXMuX3VzZXJEZXNjcmlwdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodXNlckRlc2NyaXB0aW9uU2VsZWN0b3IpO1xyXG4gICAgICAgIHRoaXMuX3VzZXJBdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHVzZXJBdmF0YXJTZWxlY3Rvcik7XHJcbiAgICB9XHJcbiAgICBnZXRVc2VySW5mbygpIHtcclxuICAgICAgICBjb25zdCB1c2VySW5mbyA9IHt9O1xyXG4gICAgICAgIHVzZXJJbmZvLm5hbWUgPSB0aGlzLl91c2VyTmFtZS50ZXh0Q29udGVudDtcclxuICAgICAgICB1c2VySW5mby5kZXNjcmlwdGlvbiA9IHRoaXMuX3VzZXJEZXNjcmlwdGlvbi50ZXh0Q29udGVudDtcclxuICAgICAgICByZXR1cm4gdXNlckluZm87XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0VXNlckF2YXRhcigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fY3VycmVudEF2YXRhcjtcclxuICAgIH1cclxuXHJcbiAgICBzZXRVc2VySW5mbyh7IG5hbWUsIGRlc2NyaXB0aW9uIH0pIHtcclxuICAgICAgICB0aGlzLl91c2VyTmFtZS50ZXh0Q29udGVudCA9IG5hbWU7XHJcbiAgICAgICAgdGhpcy5fdXNlckRlc2NyaXB0aW9uLnRleHRDb250ZW50ID0gZGVzY3JpcHRpb247XHJcbiAgICB9XHJcbiAgICBzZXRVc2VyQXZhdGFyKGF2YXRhcikge1xyXG4gICAgICAgIHRoaXMuX3VzZXJBdmF0YXIuc3JjID0gYXZhdGFyO1xyXG4gICAgICAgIHRoaXMuX2N1cnJlbnRBdmF0YXIgPSBhdmF0YXI7XHJcbiAgICB9XHJcbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBBcGkge1xyXG4gICAgY29uc3RydWN0b3Ioe2Jhc2VVcmwsIGhlYWRlcnN9KSB7XHJcbiAgICAgICAgdGhpcy5fYmFzZVVybCA9IGJhc2VVcmw7XHJcbiAgICAgICAgdGhpcy5faGVhZGVycyA9IGhlYWRlcnM7XHJcbiAgICAgICAgY29uc29sZS5sb2codGhpcy5fYmFzZVVybCwgdGhpcy5faGVhZGVycyk7XHJcbiAgICB9XHJcblxyXG4gICAgX3JlcXVlc3QodXJsLCByZXFPYmosIGVyck1zZykge1xyXG4gICAgICAgIHJldHVybiBmZXRjaCh1cmwsIHJlcU9iaikudGhlbihyZXMgPT4ge1xyXG4gICAgICAgICAgICBpZiAocmVzLm9rKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgJHtlcnJNc2d9IEVycm9yIG51bWJlcjogJHtyZXMuc3RhdHVzfWApO1xyXG4gICAgICAgICAgICB9ICAgIFxyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgZ2V0SW5pdGlhbENhcmRzKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwge1xyXG4gICAgICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICAgICAgICBtZXRob2Q6IFwiR0VUXCJcclxuICAgICAgICB9LCAnRXJyb3IgbG9hZGluZyBjYXJkcyBmcm9tIHNlcnZlci4nKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRVc2VySW5mbygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fcmVxdWVzdChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcclxuICAgICAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgICAgICAgbWV0aG9kOiBcIkdFVFwiXHJcbiAgICAgICAgfSwgJ0Vycm9yIGdldHRpbmcgdXNlciBpbmZvIGZyb20gc2VydmVyLicpO1xyXG4gICAgfVxyXG5cclxuICAgIHNldFVzZXJJbmZvKHtuYW1lLCBkZXNjcmlwdGlvbn0pIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fcmVxdWVzdChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcclxuICAgICAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXHJcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICAgICAgICAgIG5hbWUsXHJcbiAgICAgICAgICAgICAgICBhYm91dDogZGVzY3JpcHRpb25cclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9LCAnRXJyb3Igc2V0dGluZyB1c2VyIGluZm8gZnJvbSBzZXJ2ZXIuJyk7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0VXNlckF2YXRhcihhdmF0YXJVcmwpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fcmVxdWVzdChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZS9hdmF0YXJgLCB7XHJcbiAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgICAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxyXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgICAgICAgICBhdmF0YXI6IGF2YXRhclVybFxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH0sICdFcnJvciB1cGRhdGFpbmcgdXNlciBhdmF0YXIuIFBvc3NpYmx5IHlvdSB0eXBlZCBpbiB3cm9uZyBVUkwuJyk7XHJcbiAgICB9XHJcblxyXG4gICAgZGVsZXRlQ2FyZChjYXJkSWQpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fcmVxdWVzdChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy8ke2NhcmRJZH1gLCB7XHJcbiAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgICAgICAgIG1ldGhvZDogXCJERUxFVEVcIlxyXG4gICAgICAgIH0sICdFcnJvciBkZWxldGVuZyBjYXJkIGZyb20gc2VydmVyLiBUcnkgYWdhaW4gbGF0ZXIuJyk7XHJcbiAgICB9XHJcblxyXG4gICAgd3JpdGVDYXJkKGNhcmRJbmZvKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3JlcXVlc3QoYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7XHJcbiAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXHJcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGNhcmRJbmZvKVxyXG4gICAgICAgIH0sICdFcnJvciBwb3N0aW5nIGNhcmQgdG8gc2VydmVyLiBQb3NzaWJseSB5b3UgdHlwZWQgaW4gd3JvbmcgVVJMLicpO1xyXG4gICAgfVxyXG5cclxuICAgIHNldENhcmRMaWtlKGNhcmRJZCwgaXNMaWtlZCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7Y2FyZElkfS9saWtlc2AsIHtcclxuICAgICAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgICAgICAgbWV0aG9kOiBgJHtpc0xpa2VkID8gXCJQVVRcIiA6IFwiREVMRVRFXCJ9YCxcclxuICAgICAgICB9LCAnRXJyb3Igd3JpdGluZyBsaWtlLicpO1xyXG4gICAgfVxyXG5cclxuLy8gIFRoZSBmb2xvd2luZyAyIGZ1bmN0aW9ucyBhcmUgZm9yIHRlY2huaWNhbCB1c2FnZSBvbmx5IC0gdGhleSBsZXQgbWUgcmVzZXQgY2FyZHMgb24gdGhlIHNlcnZlciB0byA2IGRlZmF1bHQgY2FyZHMgZnJvbSB0aGUgb3JpZ2luYWwgYXJyYXkuXHJcblxyXG4gICAgZGVsZXRlQWxsQ2FyZHMoKSB7XHJcbiAgICAgICAgY29uc3QgcHJvbWlzZXMgPSBbXTtcclxuICAgICAgICB0aGlzLmdldEluaXRpYWxDYXJkcygpLnRoZW4ocmVzID0+IHtcclxuICAgICAgICAgICAgcmVzLmZvckVhY2goaXRlbSAgPT4ge1xyXG4gICAgICAgICAgICAgICAgcHJvbWlzZXMucHVzaCh0aGlzLmRlbGV0ZUNhcmQoaXRlbS5faWQpKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9KVxyXG4gICAgICAgIHJldHVybiBQcm9taXNlLmFsbChwcm9taXNlcyk7XHJcbiAgICB9ICAgIFxyXG4gICAgd3JpdGVDYXJkcyhjYXJkc0FycmF5KSB7XHJcbiAgICAgICAgY29uc3QgcHJvbWlzZXMgPSBbXTtcclxuICAgICAgICBjYXJkc0FycmF5LmZvckVhY2goY2FyZCA9PiB7XHJcbiAgICAgICAgICAgIHByb21pc2VzLnB1c2godGhpcy53cml0ZUNhcmQoY2FyZCkpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBQcm9taXNlLmFsbChwcm9taXNlcykudGhlbigoKSA9PiBgU3VjY2Vzc2Z1bGx5IHBvc3RlZCAke3Byb21pc2VzLmxlbmd0aH0gY2FyZHMuYCk7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoU3VibWl0QnV0dG9uIGV4dGVuZHMgUG9wdXAge1xyXG4gICAgY29uc3RydWN0b3IoZGF0YSwgZm9ybVNlbGVjdG9yLCBzdWJtaXRIYW5kbGVyKSB7XHJcbiAgICAgICAgc3VwZXIoZGF0YSk7XHJcbiAgICAgICAgdGhpcy5fc3VibWl0SGFuZGxlciA9IHN1Ym1pdEhhbmRsZXI7XHJcbiAgICAgICAgdGhpcy5fcG9wdXBGb3JtID0gdGhpcy5fcG9wdXBXaW5kb3cucXVlcnlTZWxlY3Rvcihmb3JtU2VsZWN0b3IpO1xyXG4gICAgfVxyXG5cclxuICAgIG9wZW4oY2FyZCkge1xyXG4gICAgICAgIHRoaXMuX2NhcmRUb0RlbGV0ZSA9IGNhcmQ7XHJcbiAgICAgICAgc3VwZXIub3BlbigpO1xyXG4gICAgfVxyXG5cclxuICAgIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICAgICAgdGhpcy5fcG9wdXBGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLl9zdWJtaXRIYW5kbGVyKGV2dCwgdGhpcy5fY2FyZFRvRGVsZXRlKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbn0iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgICBjb25zdHJ1Y3RvcihkYXRhLCBwaWNTZWxlY3RvciwgY2FwdFNlbGVjdG9yKSB7XHJcbiAgICAgICAgc3VwZXIoZGF0YSk7XHJcbiAgICAgICAgdGhpcy5fcGljdHVyZSA9IHRoaXMuX3BvcHVwV2luZG93LnF1ZXJ5U2VsZWN0b3IocGljU2VsZWN0b3IpO1xyXG4gICAgICAgIHRoaXMuX2NhcHRpb24gPSB0aGlzLl9wb3B1cFdpbmRvdy5xdWVyeVNlbGVjdG9yKGNhcHRTZWxlY3Rvcik7XHJcbiAgICB9XHJcbiAgICBvcGVuKHsgbGluaywgYWx0SW5mbywgbmFtZX0gKSB7XHJcbiAgICAgICAgc3VwZXIub3BlbigpO1xyXG4gICAgICAgIHRoaXMuX3BpY3R1cmUuc3JjID0gbGluaztcclxuICAgICAgICB0aGlzLl9waWN0dXJlLmFsdCA9IGFsdEluZm87XHJcbiAgICAgICAgdGhpcy5fY2FwdGlvbi50ZXh0Q29udGVudCA9IG5hbWU7XHJcbiAgICB9XHJcbiAgICBcclxufSJdLCJuYW1lcyI6WyJTZWN0aW9uIiwiY29uc3RydWN0b3IiLCJfcmVmIiwiY29udGFpbmVyU2VsZWN0b3IiLCJpdGVtcyIsInJlbmRlcmVyIiwidGhpcyIsIl9pdGVtcyIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJyZW5kZXJJdGVtcyIsImNsZWFyIiwiZm9yRWFjaCIsIml0ZW0iLCJpbm5lckhUTUwiLCJhcHBlbmRJdGVtIiwiZWxlbWVudCIsImFwcGVuZCIsInByZXBlbmRJdGVtIiwicHJlcGVuZCIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsInBvcHVwT3BlbmVkQ2xhc3MiLCJjbG9zZUJ1dHRvblNlbGVjdG9yIiwiX3BvcHVwV2luZG93IiwiX2Nsb3NlQnV0dG9uIiwiX3BvcHVwT3BlbmVkQ2xhc3MiLCJvcGVuIiwiY2xhc3NMaXN0IiwiYWRkIiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9oYW5kbGVFc2NDbG9zZSIsImNsb3NlIiwicmVtb3ZlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImV2dCIsImtleSIsInNldEV2ZW50TGlzdGVuZXJzIiwidGFyZ2V0IiwiY3VycmVudFRhcmdldCIsIlBvcHVwV2l0aEZvcm0iLCJkYXRhIiwiZm9ybVNlbGVjdG9yIiwic3VibWl0SGFuZGxlciIsInN1cGVyIiwiX3N1Ym1pdEhhbmRsZXIiLCJfcG9wdXBGb3JtIiwiX2Zvcm1JbnB1dHMiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiX3N1Ym1pdEJ0biIsIl9zdWJtaXRCdG5PcmlnVGV4dCIsInRleHRDb250ZW50IiwiX2dldElucHV0VmFsdWVzIiwiaW5wdXRWYWx1ZXMiLCJmb3JtSW5wdXQiLCJuYW1lIiwidmFsdWUiLCJzZXRJbnB1dFZhbHVlcyIsInJlc2V0IiwicmVuZGVyTG9hZGluZyIsImlzTG9hZGluZyIsImxvYWRpbmdUZXh0IiwiYXJndW1lbnRzIiwibGVuZ3RoIiwidW5kZWZpbmVkIiwiQ2FyZCIsImNhcmRTZWxlY3RvciIsImhhbmRsZUltYWdlQ2xpY2siLCJjb25maXJtRGVsZXRlIiwiY2FsbEFwaURlbGV0ZSIsImNhbGxBcGlMaWtlIiwiX2NhcmRTZWxlY3RvciIsIl9oYW5kbGVJbWFnZUNsaWNrIiwiX2NvbmZpcm1EZWxldGUiLCJfY2FsbEFwaURlbGV0ZSIsIl9jYWxsQXBpTGlrZSIsIl9jYXJkRWxlbWVudCIsImNsb25lTm9kZSIsIl9jYXJkRWxlbWVudENhcHRpb24iLCJfbGlrZUVsZW1lbnQiLCJfY2FyZEltYWdlRWxlbWVudCIsInNyYyIsImxpbmsiLCJhbHQiLCJpZCIsIl9pZCIsImlzTGlrZWQiLCJfaGFuZGxlTGlrZUNhcmQiLCJjb250YWlucyIsInRoZW4iLCJyZXMiLCJ0b2dnbGUiLCJjYXRjaCIsImVyciIsImFsZXJ0IiwiX2hhbmRsZURlbGV0ZUNhcmQiLCJkZWxldGVDYXJkIiwiX3JlbW92ZUV2ZW50TGlzdGVuZXJzIiwiX2NhbGxIYW5kbGVJbWFnZUNsaWNrIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiZ2V0Q2FyZEVsZW1lbnQiLCJnZXRDYXJkTmFtZSIsImdldENhcmRBbHRJbmZvIiwiZ2V0Q2FyZExpbmsiLCJGb3JtVmFsaWRhdG9yIiwiZWxlbWVudFRvVmFsaWRhdGUiLCJpbnB1dFNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJpbnB1dEVycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiX2lucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfaW5wdXRFcnJvckNsYXNzIiwiX2Vycm9yQ2xhc3MiLCJfZm9ybUVsZW1lbnQiLCJfaW5wdXRMaXN0IiwiX2J1dHRvbkVsZW1lbnQiLCJfc2hvd0lucHV0RXJyb3IiLCJpbnB1dEVsZW1lbnQiLCJlcnJvckVsZW1lbnQiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsIl9oaWRlSW5wdXRFcnJvciIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2hhc0ludmFsaWRJbnB1dCIsInNvbWUiLCJfc2V0U3VibWl0QnV0dG9uU3RhdGUiLCJkaXNhYmxlU3VibWl0QnV0dG9uIiwiZGlzYWJsZWQiLCJlbmFibGVWYWxpZGF0aW9uIiwicHJldmVudERlZmF1bHQiLCJyZXNldFZhbGlkYXRpb24iLCJzaW11bGF0ZUlucHV0RXZlbnQiLCJFdmVudCIsIm1vZGFsSW5wdXQiLCJkaXNwYXRjaEV2ZW50IiwiY2FyZHNBcnJheSIsImZvcm1WYWxpZGF0b3JzIiwiaW5wdXRGb3Jtc0luZm8iLCJtb2RhbFRpdGxlSW5wdXROYW1lIiwibW9kYWxEZXNjcmlwdGlvbklucHV0TmFtZSIsIm1vZGFsUHJvZmlsZVVybElucHV0TmFtZSIsIm1vZGFsUGxhY2VJbnB1dE5hbWUiLCJtb2RhbFBsYWNlUGljVXJsSW5wdXROYW1lIiwiZWRpdFByb2ZpbGVCdG4iLCJmb3JtcyIsImVkaXRQcm9maWxlQXZhdGFyQnRuIiwiYWRkQ2FyZEJ0biIsImNhcmRUZW1wbGF0ZSIsImNvbnRlbnQiLCJyZXNldENhcmRzQnRuIiwiY3JlYXRlQ2FyZCIsImNhcmRJbmZvIiwib3BlbkNvbmZpcm1EZWxldGVQb3B1cCIsImFwaURlbGV0ZUNhcmQiLCJhcGlMaWtlQ2FyZCIsImNhcmQiLCJpbWFnZVBvcHVwIiwiYWx0SW5mbyIsInVzZXIiLCJ1c2VyTmFtZVNlbGVjdG9yIiwidXNlckRlc2NyaXB0aW9uU2VsZWN0b3IiLCJ1c2VyQXZhdGFyU2VsZWN0b3IiLCJfdXNlck5hbWUiLCJfdXNlckRlc2NyaXB0aW9uIiwiX3VzZXJBdmF0YXIiLCJnZXRVc2VySW5mbyIsInVzZXJJbmZvIiwiZGVzY3JpcHRpb24iLCJnZXRVc2VyQXZhdGFyIiwiX2N1cnJlbnRBdmF0YXIiLCJzZXRVc2VySW5mbyIsIl9yZWYyIiwic2V0VXNlckF2YXRhciIsImF2YXRhciIsImVkaXRQcm9maWxlUG9wdXAiLCJwb3B1cCIsIm5ld1VzZXJJbmZvIiwiYXBpIiwiZmluYWxseSIsInNldFRpbWVvdXQiLCJlZGl0UHJvZmlsZUF2YXRhclBvcHVwIiwiY29uc29sZSIsImxvZyIsInNldENhcmRMaWtlIiwiZGVsZXRlQWxsQ2FyZHMiLCJ3cml0ZUNhcmRzIiwiYmFzZVVybCIsImhlYWRlcnMiLCJfYmFzZVVybCIsIl9oZWFkZXJzIiwiX3JlcXVlc3QiLCJ1cmwiLCJyZXFPYmoiLCJlcnJNc2ciLCJmZXRjaCIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJzdGF0dXMiLCJnZXRJbml0aWFsQ2FyZHMiLCJtZXRob2QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImFib3V0IiwiYXZhdGFyVXJsIiwiY2FyZElkIiwid3JpdGVDYXJkIiwicHJvbWlzZXMiLCJwdXNoIiwiYWxsIiwiYXV0aG9yaXphdGlvbiIsImNhcmRzU2VjdGlvbiIsImNhcmRzIiwidXNlckRhdGEiLCJuZXdDYXJkRWxlbWVudCIsImFsbGVydCIsImFkZENhcmRQb3B1cCIsImFkZGVkQ2FyZCIsImNvbmZpcm1EZWxldGVQb3B1cCIsIl9jYXJkVG9EZWxldGUiLCJjYXJkVG9EZWxldGUiLCJwaWNTZWxlY3RvciIsImNhcHRTZWxlY3RvciIsIl9waWN0dXJlIiwiX2NhcHRpb24iLCJjb25maWciLCJmb3JtRWxlbWVudCIsIm5ld0Zvcm1WYWxpZGF0b3IiLCJmb3JtTmFtZSIsImdldEF0dHJpYnV0ZSJdLCJzb3VyY2VSb290IjoiIn0=